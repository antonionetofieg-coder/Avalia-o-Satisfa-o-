<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Anal√≠tico - SESI</title>
    
    <!-- 1. Tailwind CSS para estilos -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. React e ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- 3. Prop-Types (CORRE√á√ÉO: Depend√™ncia necess√°ria para Recharts UMD) -->
    <script src="https://unpkg.com/prop-types/prop-types.min.js"></script>

    <!-- 4. Recharts para Gr√°ficos -->
    <script src="https://unpkg.com/recharts@2.12.7/umd/Recharts.js"></script>
    
    <!-- 5. Babel para traduzir JSX no navegador -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f8fafc; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- CONFIGURA√á√ÉO DAS DEPEND√äNCIAS ---
        const { useState } = React;
        const { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, LabelList } = Recharts;

        // --- √çCONES (SVG Inline para evitar depend√™ncias externas complexas) ---
        const Icon = ({ path, color = "currentColor", size = 20 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                {path}
            </svg>
        );

        const Trophy = (props) => <Icon {...props} path={<><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></>} />;
        const AlertTriangle = (props) => <Icon {...props} path={<><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></>} />;
        const MessageSquare = (props) => <Icon {...props} path={<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>} />;
        const Target = (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></>} />;
        const Users = (props) => <Icon {...props} path={<><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></>} />;
        const BookOpen = (props) => <Icon {...props} path={<><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></>} />;
        const Monitor = (props) => <Icon {...props} path={<><rect width="20" height="14" x="2" y="3" rx="2"/><line x1="8" x2="16" y1="21" y2="21"/><line x1="12" x2="12" y1="17" y2="21"/></>} />;
        const ClipboardCheck = (props) => <Icon {...props} path={<><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="m9 14 2 2 4-4"/></>} />;
        
        // CORRE√á√ÉO AQUI: Wrapping em fragmentos <>...</>
        const TrendingUp = (props) => <Icon {...props} path={<><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></>} />;
        const TrendingDown = (props) => <Icon {...props} path={<><polyline points="23 18 13.5 8.5 8.5 13.5 1 6"/><polyline points="17 18 23 18 23 12"/></>} />;
        
        const ArrowRight = (props) => <Icon {...props} path={<><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></>} />;
        const MapPin = (props) => <Icon {...props} path={<><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></>} />;


        // --- DADOS 2024 (FLORES DE GOI√ÅS) ---
        const dataFlores2024 = {
        material: [
            { id: '1.1', question: 'Clareza e organiza√ß√£o', mb: 83, b: 17, r: 0, ru: 0, mr: 0, sat: 100 },
            { id: '1.2', question: 'Atualidade das informa√ß√µes', mb: 79, b: 17, r: 4, ru: 0, mr: 0, sat: 96 },
            { id: '1.3', question: 'Adequa√ß√£o ao curr√≠culo', mb: 83, b: 17, r: 0, ru: 0, mr: 0, sat: 100 },
            { id: '1.4', question: 'Atratividade visual', mb: 71, b: 25, r: 4, ru: 0, mr: 0, sat: 96 },
            { id: '1.5', question: 'Relev√¢ncia dos exerc√≠cios', mb: 79, b: 21, r: 0, ru: 0, mr: 0, sat: 100 },
            { id: '1.6', question: 'Facilidade de uso em sala', mb: 54, b: 30, r: 16, ru: 0, mr: 0, sat: 84 },
        ],
        capacitacao: [
            { id: '3.1', question: 'Clareza nas orienta√ß√µes', mb: 79, b: 21, r: 0, ru: 0, mr: 0, sat: 100 },
            { id: '3.2', question: 'Qualidade materiais', mb: 96, b: 4, r: 0, ru: 0, mr: 0, sat: 100 },
            { id: '3.3', question: 'Dom√≠nio dos instrutores', mb: 71, b: 29, r: 0, ru: 0, mr: 0, sat: 100 },
            { id: '3.4', question: 'Aplicabilidade conte√∫do', mb: 71, b: 29, r: 0, ru: 0, mr: 0, sat: 100 },
            { id: '3.5', question: 'Frequ√™ncia e continuidade', mb: 63, b: 37, r: 0, ru: 0, mr: 0, sat: 100 },
            { id: '3.6', question: 'Suporte p√≥s-capacita√ß√£o', mb: 54, b: 38, r: 8, ru: 0, mr: 0, sat: 92 },
        ],
        portal: [
            { id: '2.1', question: 'Facilidade de navega√ß√£o', mb: 75, b: 21, r: 4, ru: 0, mr: 0, sat: 96 },
            { id: '2.2', question: 'Funcionalidade e recursos', mb: 75, b: 21, r: 4, ru: 0, mr: 0, sat: 96 },
            { id: '2.3', question: 'Qualidade do conte√∫do', mb: 83, b: 17, r: 0, ru: 0, mr: 0, sat: 100 },
            { id: '2.4', question: 'Adequa√ß√£o das atividades', mb: 71, b: 29, r: 0, ru: 0, mr: 0, sat: 100 },
            { id: '2.5', question: 'Suporte t√©cnico', mb: 62, b: 38, r: 0, ru: 0, mr: 0, sat: 100 },
            { id: '2.6', question: 'Atualiza√ß√£o frequente', mb: 79, b: 21, r: 0, ru: 0, mr: 0, sat: 100 },
        ],
        passe: [
            { id: '4.1', question: 'Precis√£o na avalia√ß√£o', mb: 63, b: 25, r: 12, ru: 0, mr: 0, sat: 88 },
            { id: '4.2', question: 'Relev√¢ncia conte√∫dos', mb: 67, b: 29, r: 4, ru: 0, mr: 0, sat: 96 },
            { id: '4.3', question: 'Facilidade na aplica√ß√£o', mb: 67, b: 25, r: 8, ru: 0, mr: 0, sat: 92 },
            { id: '4.4', question: 'Feedback equipe pedag.', mb: 63, b: 33, r: 4, ru: 0, mr: 0, sat: 96 },
            { id: '4.5', question: 'Frequ√™ncia avalia√ß√µes', mb: 67, b: 29, r: 4, ru: 0, mr: 0, sat: 96 },
            { id: '4.6', question: 'Impacto no desempenho', mb: 63, b: 29, r: 8, ru: 0, mr: 0, sat: 92 },
        ],
        nps: 65,
        comentarios: [
            { categoria: 'Infraestrutura', texto: "A escola necessita de √°rea de lazer para os alunos, bem como sala de brinquedoteca e tecnologias." },
            { categoria: 'Gest√£o de Pessoas', texto: "O ensino √© √≥timo, por√©m o problema s√£o alguns professores que s√≥ querem cumprir carga hor√°ria. A diretora d√° tudo de si." },
            { categoria: 'Capacita√ß√£o', texto: "Oferecer mais forma√ß√µes e capacita√ß√µes presenciais aos professores." },
            { categoria: 'Infraestrutura', texto: "Melhorias no espa√ßo f√≠sico da escola. Constru√ß√£o de quadras." }
        ]
        };

        // --- DADOS 2025 (FLORES DE GOI√ÅS - NOV) ---
        const dataFlores2025 = {
        material: [
            { id: '1.1', question: 'Clareza e organiza√ß√£o', mb: 80, b: 7, r: 13, ru: 0, mr: 0, sat: 87 },
            { id: '1.2', question: 'Atualidade das informa√ß√µes', mb: 73, b: 13, r: 13, ru: 0, mr: 0, sat: 86 },
            { id: '1.3', question: 'Adequa√ß√£o ao curr√≠culo', mb: 73, b: 13, r: 13, ru: 0, mr: 0, sat: 86 },
            { id: '1.4', question: 'Atratividade visual', mb: 73, b: 13, r: 13, ru: 0, mr: 0, sat: 86 },
            { id: '1.5', question: 'Relev√¢ncia dos exerc√≠cios', mb: 67, b: 27, r: 6, ru: 0, mr: 0, sat: 93 },
        ],
        capacitacao: [
            { id: '3.1', question: 'Clareza nas orienta√ß√µes', mb: 60, b: 27, r: 13, ru: 0, mr: 0, sat: 87 },
            { id: '3.2', question: 'Qualidade materiais', mb: 80, b: 7, r: 13, ru: 0, mr: 0, sat: 87 },
            { id: '3.3', question: 'Dom√≠nio dos instrutores', mb: 87, b: 7, r: 7, ru: 0, mr: 0, sat: 93 },
            { id: '3.4', question: 'Aplicabilidade conte√∫do', mb: 73, b: 27, r: 0, ru: 0, mr: 0, sat: 100 },
            { id: '3.5', question: 'Frequ√™ncia e continuidade', mb: 73, b: 20, r: 7, ru: 0, mr: 0, sat: 93 },
            { id: '3.6', question: 'Suporte p√≥s-capacita√ß√£o', mb: 53, b: 20, r: 27, ru: 0, mr: 0, sat: 73 },
        ],
        portal: [
            { id: '2.1', question: 'Facilidade de navega√ß√£o', mb: 60, b: 40, r: 0, ru: 0, mr: 0, sat: 100 },
            { id: '2.2', question: 'Funcionalidade e recursos', mb: 73, b: 27, r: 0, ru: 0, mr: 0, sat: 100 },
            { id: '2.3', question: 'Qualidade do conte√∫do', mb: 73, b: 20, r: 7, ru: 0, mr: 0, sat: 93 },
            { id: '2.4', question: 'Adequa√ß√£o das atividades', mb: 67, b: 13, r: 20, ru: 0, mr: 0, sat: 80 },
            { id: '2.5', question: 'Suporte t√©cnico', mb: 60, b: 33, r: 7, ru: 0, mr: 0, sat: 93 },
            { id: '2.6', question: 'Atualiza√ß√£o frequente', mb: 67, b: 20, r: 13, ru: 0, mr: 0, sat: 87 },
        ],
        passe: [
            { id: '4.1', question: 'Precis√£o na avalia√ß√£o', mb: 47, b: 33, r: 20, ru: 0, mr: 0, sat: 80 },
            { id: '4.2', question: 'Relev√¢ncia conte√∫dos', mb: 53, b: 33, r: 13, ru: 0, mr: 0, sat: 86 },
            { id: '4.3', question: 'Facilidade na aplica√ß√£o', mb: 60, b: 27, r: 13, ru: 0, mr: 0, sat: 87 },
            { id: '4.4', question: 'Feedback equipe pedag.', mb: 67, b: 20, r: 13, ru: 0, mr: 0, sat: 87 },
            { id: '4.5', question: 'Frequ√™ncia avalia√ß√µes', mb: 60, b: 27, r: 13, ru: 0, mr: 0, sat: 87 },
        ],
        nps: 6,
        comentarios: [
            { categoria: 'Pedag√≥gico', texto: "Est√£o colocando conte√∫dos que os alunos ainda n√£o estudaram." },
            { categoria: 'Processos', texto: "Quantidade de avalia√ß√µes demasiada. Alunos realizam do munic√≠pio e do SESI. Repensar proposta." },
            { categoria: 'Infraestrutura', texto: "Colocar TVs smart em todas as salas de aula para mais rendimento." },
            { categoria: 'Positivo', texto: "Material muito bom. Quem visita o portal consegue fazer um excelente trabalho." },
            { categoria: 'Elogio', texto: "S√£o maravilhosas as capacita√ß√µes, queremos mensal e presencial." }
        ]
        };

        // --- DADOS RIO QUENTE (Consolidado) ---
        const dataRioQuente = {
        material: [
            { id: '1.4', question: 'Atratividade visual', mb: 62, b: 34, r: 4, ru: 0, mr: 0, sat: 96 },
            { id: '1.2', question: 'Atualidade das informa√ß√µes', mb: 60, b: 32, r: 6, ru: 2, mr: 0, sat: 92 },
            { id: '1.3', question: 'Adequa√ß√£o ao curr√≠culo', mb: 43, b: 49, r: 6, ru: 2, mr: 0, sat: 92 },
            { id: '1.1', question: 'Clareza e organiza√ß√£o', mb: 47, b: 40, r: 11, ru: 2, mr: 0, sat: 87 },
            { id: '1.5', question: 'Relev√¢ncia dos exerc√≠cios', mb: 36, b: 49, r: 13, ru: 2, mr: 0, sat: 85 },
            { id: '1.6', question: 'Facilidade de uso em sala', mb: 47, b: 34, r: 15, ru: 4, mr: 0, sat: 81 },
        ],
        capacitacao: [
            { id: '3.3', question: 'Dom√≠nio dos instrutores', mb: 62, b: 34, r: 2, ru: 2, mr: 0, sat: 96 },
            { id: '3.2', question: 'Qualidade materiais', mb: 51, b: 40, r: 9, ru: 0, mr: 0, sat: 91 },
            { id: '3.1', question: 'Clareza nas orienta√ß√µes', mb: 43, b: 47, r: 9, ru: 2, mr: 0, sat: 90 },
            { id: '3.4', question: 'Aplicabilidade conte√∫do', mb: 49, b: 40, r: 9, ru: 2, mr: 0, sat: 89 },
            { id: '3.6', question: 'Suporte p√≥s-capacita√ß√£o', mb: 47, b: 40, r: 11, ru: 2, mr: 0, sat: 87 },
            { id: '3.5', question: 'Frequ√™ncia e continuidade', mb: 38, b: 49, r: 9, ru: 4, mr: 0, sat: 87 },
        ],
        portal: [
            { id: '2.1', question: 'Facilidade de navega√ß√£o', mb: 62, b: 34, r: 4, ru: 0, mr: 0, sat: 96 },
            { id: '2.3', question: 'Qualidade do conte√∫do', mb: 47, b: 49, r: 2, ru: 2, mr: 0, sat: 96 },
            { id: '2.6', question: 'Atualiza√ß√£o frequente', mb: 49, b: 45, r: 2, ru: 4, mr: 0, sat: 94 },
            { id: '2.5', question: 'Suporte t√©cnico', mb: 57, b: 36, r: 6, ru: 0, mr: 0, sat: 93 },
            { id: '2.2', question: 'Funcionalidade e recursos', mb: 60, b: 32, r: 9, ru: 0, mr: 0, sat: 92 },
            { id: '2.4', question: 'Adequa√ß√£o das atividades', mb: 36, b: 47, r: 13, ru: 4, mr: 0, sat: 83 },
        ],
        passe: [
            { id: '4.4', question: 'Feedback equipe pedag.', mb: 53, b: 45, r: 2, ru: 0, mr: 0, sat: 98 },
            { id: '4.5', question: 'Frequ√™ncia avalia√ß√µes', mb: 45, b: 47, r: 9, ru: 0, mr: 0, sat: 92 },
            { id: '4.3', question: 'Facilidade na aplica√ß√£o', mb: 45, b: 47, r: 6, ru: 0, mr: 2, sat: 92 },
            { id: '4.2', question: 'Relev√¢ncia conte√∫dos', mb: 40, b: 51, r: 6, ru: 2, mr: 0, sat: 91 },
            { id: '4.1', question: 'Precis√£o na avalia√ß√£o', mb: 45, b: 43, r: 11, ru: 0, mr: 2, sat: 88 },
            { id: '4.6', question: 'Impacto no desempenho', mb: 32, b: 51, r: 15, ru: 2, mr: 0, sat: 83 },
        ],
        nps: 36,
        comentarios: [
            { categoria: 'Gest√£o/Processos', texto: "Capacita√ß√£o com mais frequ√™ncia... cada setor 'FALAR A MESMA LINGUAGEM'." },
            { categoria: 'Pedag√≥gico', texto: "Acredito que o material deveria contar com a recomposi√ß√£o de aprendizagem..." },
            { categoria: 'Inclus√£o', texto: "Material mais adaptado e flexibiliza√ß√µes para neurodivergentes." },
            { categoria: 'Rob√≥tica/Tecnologia', texto: "Melhoria pegando todos os conte√∫dos de rob√≥tica focando apenas nas atividades poss√≠veis com notebook." },
            { categoria: 'Clima/Cultura', texto: "Alguns funcion√°rios s√£o muito agressivos nas suas abordagens." },
            { categoria: 'Positivo', texto: "Nesse ano foi uma experi√™ncia incr√≠vel, e acredito que no pr√≥ximo ano letivo vai ser ainda melhor." }
        ]
        };

        // Cores
        const COLORS = {
        mb: "#15803d", b: "#4ade80", r: "#facc15", ru: "#fb923c", mr: "#ef4444",
        year24: "#94a3b8", year25: "#2563eb"
        };

        const CustomTooltip = ({ active, payload, label }) => {
        if (active && payload && payload.length) {
            return (
            <div className="bg-white p-3 border border-gray-200 shadow-lg rounded-lg text-sm z-50">
                <p className="font-bold text-gray-800 mb-2">{label}</p>
                {payload.map((entry, index) => (
                <div key={index} className="flex items-center gap-2">
                    <div className="w-3 h-3 rounded-full" style={{ backgroundColor: entry.color }}></div>
                    <span className="capitalize text-gray-600">
                    {entry.name === 'mb' ? 'Muito Bom' : entry.name === 'b' ? 'Bom' : entry.name === 'r' ? 'Regular' : entry.name === '2024' ? 'Ano 2024' : entry.name === '2025' ? 'Ano 2025' : entry.name}: 
                    <span className="font-bold ml-1">{entry.value}%</span>
                    </span>
                </div>
                ))}
            </div>
            );
        }
        return null;
        };

        const SingleYearChart = ({ title, data, icon: Icon }) => (
        <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-6">
            <div className="flex items-center gap-2 mb-6">
            <div className="p-2 bg-blue-50 rounded-lg text-blue-600">
                <Icon size={24} />
            </div>
            <h3 className="text-xl font-bold text-gray-800">{title}</h3>
            </div>
            {data && data.length > 0 ? (
            <div className="h-[350px] w-full">
                <ResponsiveContainer width="100%" height="100%">
                <BarChart layout="vertical" data={data} margin={{ top: 5, right: 30, left: 40, bottom: 5 }}>
                    <CartesianGrid strokeDasharray="3 3" horizontal={true} vertical={false} stroke="#e5e7eb" />
                    <XAxis type="number" domain={[0, 100]} hide />
                    <YAxis dataKey="question" type="category" width={180} tick={{fontSize: 11, fill: '#4b5563'}} interval={0} />
                    <Tooltip content={<CustomTooltip />} />
                    <Legend wrapperStyle={{ paddingTop: '20px' }} />
                    <Bar dataKey="mb" name="Muito Bom" stackId="a" fill={COLORS.mb} barSize={20}>
                    <LabelList dataKey="mb" position="center" fill="#fff" fontSize={10} formatter={(v) => v > 5 ? `${v}%` : ''} />
                    </Bar>
                    <Bar dataKey="b" name="Bom" stackId="a" fill={COLORS.b} barSize={20}>
                    <LabelList dataKey="b" position="center" fill="#1f2937" fontSize={10} formatter={(v) => v > 5 ? `${v}%` : ''} />
                    </Bar>
                    <Bar dataKey="r" name="Regular" stackId="a" fill={COLORS.r} barSize={20}>
                    <LabelList dataKey="r" position="center" fill="#1f2937" fontSize={10} formatter={(v) => v > 5 ? `${v}%` : ''} />
                    </Bar>
                    <Bar dataKey="ru" name="Ruim" stackId="a" fill={COLORS.ru} barSize={20}>
                    <LabelList dataKey="ru" position="center" fill="#1f2937" fontSize={10} formatter={(v) => v > 5 ? `${v}%` : ''} />
                    </Bar>
                    <Bar dataKey="mr" name="Muito Ruim" stackId="a" fill={COLORS.mr} barSize={20} radius={[0, 4, 4, 0]}>
                    <LabelList dataKey="mr" position="center" fill="#fff" fontSize={10} formatter={(v) => v > 5 ? `${v}%` : ''} />
                    </Bar>
                </BarChart>
                </ResponsiveContainer>
            </div>
            ) : (
            <div className="h-[200px] flex items-center justify-center text-gray-400 bg-gray-50 rounded-lg border-dashed border-2 border-gray-200">
                Dados n√£o dispon√≠veis para este per√≠odo
            </div>
            )}
        </div>
        );

        const ComparisonChart = ({ title, data24, data25, icon: Icon }) => {
        const mergedData = data24.map(item24 => {
            const item25 = data25.find(d => d.id === item24.id);
            return {
            question: item24.question,
            sat24: item24.sat,
            sat25: item25 ? item25.sat : 0
            };
        }).filter(item => item.sat25 > 0);

        return (
            <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-6">
            <div className="flex items-center justify-between mb-6">
                <div className="flex items-center gap-2">
                <div className="p-2 bg-purple-50 rounded-lg text-purple-600">
                    <Icon size={24} />
                </div>
                <h3 className="text-xl font-bold text-gray-800">{title} <span className="text-sm font-normal text-gray-500">(Comparativo de Satisfa√ß√£o %)</span></h3>
                </div>
            </div>
            <div className="h-[400px] w-full">
                <ResponsiveContainer width="100%" height="100%">
                <BarChart layout="vertical" data={mergedData} margin={{ top: 5, right: 30, left: 40, bottom: 5 }}>
                    <CartesianGrid strokeDasharray="3 3" horizontal={true} vertical={false} stroke="#e5e7eb" />
                    <XAxis type="number" domain={[0, 100]} />
                    <YAxis dataKey="question" type="category" width={180} tick={{fontSize: 11, fill: '#4b5563'}} interval={0} />
                    <Tooltip />
                    <Legend />
                    <Bar dataKey="sat24" name="2024" fill={COLORS.year24} barSize={15} radius={[0, 4, 4, 0]}>
                    <LabelList dataKey="sat24" position="right" fill="#64748b" fontSize={10} formatter={(v) => `${v}%`} />
                    </Bar>
                    <Bar dataKey="sat25" name="2025" fill={COLORS.year25} barSize={15} radius={[0, 4, 4, 0]}>
                    <LabelList dataKey="sat25" position="right" fill="#2563eb" fontSize={10} fontWeight="bold" formatter={(v) => `${v}%`} />
                    </Bar>
                </BarChart>
                </ResponsiveContainer>
            </div>
            </div>
        );
        };

        function App() {
        const [unit, setUnit] = useState('flores'); 
        const [year, setYear] = useState('2025'); 

        let currentData;
        let isCompare = false;

        if (unit === 'rio_quente') {
            currentData = dataRioQuente;
            isCompare = false;
        } else {
            isCompare = year === 'compare';
            currentData = year === '2024' ? dataFlores2024 : dataFlores2025;
        }

        const headerColor = unit === 'flores' ? 'bg-indigo-900' : 'bg-teal-800';

        return (
            <div className="min-h-screen bg-slate-50 font-sans text-gray-800 pb-12">
            <header className={`${headerColor} text-white p-6 shadow-lg transition-colors duration-500`}>
                <div className="max-w-7xl mx-auto flex flex-col justify-between">
                <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                    <div>
                    <h1 className="text-3xl font-bold tracking-tight">Relat√≥rio de Avalia√ß√£o Institucional</h1>
                    <p className="text-white/80 mt-1 flex items-center gap-2">
                        <MapPin size={16} />
                        {unit === 'flores' ? 'Unidade Flores de Goi√°s' : 'Unidade Rio Quente'}
                    </p>
                    </div>

                    <div className="mt-4 md:mt-0 flex bg-black/20 p-1 rounded-lg backdrop-blur-sm">
                    <button 
                        onClick={() => { setUnit('flores'); setYear('2025'); }}
                        className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${unit === 'flores' ? 'bg-white text-indigo-900 shadow-sm' : 'text-white/70 hover:text-white'}`}
                    >
                        Flores de Goi√°s
                    </button>
                    <button 
                        onClick={() => setUnit('rio_quente')}
                        className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${unit === 'rio_quente' ? 'bg-white text-teal-900 shadow-sm' : 'text-white/70 hover:text-white'}`}
                    >
                        Rio Quente
                    </button>
                    </div>
                </div>
                
                {unit === 'flores' && (
                    <div className="flex justify-end border-t border-white/10 pt-4">
                    <div className="flex bg-black/20 p-1 rounded-lg">
                        <button 
                        onClick={() => setYear('2024')}
                        className={`px-4 py-1.5 rounded-md text-xs font-medium transition-all ${year === '2024' ? 'bg-white/90 text-indigo-900 shadow-sm' : 'text-indigo-100 hover:text-white'}`}
                        >
                        2024
                        </button>
                        <button 
                        onClick={() => setYear('2025')}
                        className={`px-4 py-1.5 rounded-md text-xs font-medium transition-all ${year === '2025' ? 'bg-white/90 text-indigo-900 shadow-sm' : 'text-indigo-100 hover:text-white'}`}
                        >
                        2025
                        </button>
                        <button 
                        onClick={() => setYear('compare')}
                        className={`px-4 py-1.5 rounded-md text-xs font-medium transition-all flex items-center gap-1 ${year === 'compare' ? 'bg-indigo-500 text-white shadow-sm' : 'text-indigo-100 hover:text-white'}`}
                        >
                        <TrendingUp size={12} stroke="currentColor" />
                        Comparativo
                        </button>
                    </div>
                    </div>
                )}
                </div>
            </header>

            <main className="max-w-7xl mx-auto px-4 mt-8">
                
                <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div className={`p-6 rounded-xl shadow-md border-t-4 flex flex-col items-center justify-center col-span-1 bg-white 
                    ${unit === 'rio_quente' ? 'border-amber-500' : (year === '2024' || (isCompare && currentData.nps > 50)) ? 'border-green-600' : 'border-red-600'}`}>
                    <h2 className="text-gray-500 text-sm font-semibold uppercase tracking-wider mb-2">NPS (Net Promoter Score)</h2>
                    
                    {isCompare && unit === 'flores' ? (
                    <div className="flex flex-col items-center w-full">
                        <div className="flex justify-between w-full px-4 mb-2">
                            <span className="text-sm font-bold text-gray-400">2024</span>
                            <span className="text-sm font-bold text-gray-400">2025</span>
                        </div>
                        <div className="flex items-center gap-4">
                            <span className="text-4xl font-black text-green-700">65</span>
                            <ArrowRight size={24} className="text-gray-300"/>
                            <span className="text-4xl font-black text-red-600">6</span>
                        </div>
                        <div className="mt-4 px-3 py-1 bg-red-50 text-red-700 text-xs font-bold rounded-full uppercase flex items-center gap-1">
                            <TrendingDown size={12} /> Queda Cr√≠tica (-59pts)
                        </div>
                    </div>
                    ) : (
                    <>
                        <div className="flex items-end gap-2">
                        <span className={`text-6xl font-black ${
                            unit === 'rio_quente' ? 'text-amber-600' : 
                            (year === '2024' ? 'text-green-700' : 'text-red-700')
                        }`}>
                            {currentData.nps}
                        </span>
                        <span className="text-lg text-gray-400 mb-2">/ 100</span>
                        </div>
                        <div className={`mt-4 px-3 py-1 text-xs font-bold rounded-full uppercase flex items-center gap-1 
                        ${unit === 'rio_quente' ? 'bg-amber-50 text-amber-700' : 
                        (year === '2024' ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-700')}`}>
                        {unit === 'rio_quente' ? <Target size={12} /> : (year === '2024' ? <Trophy size={12} /> : <AlertTriangle size={12} />)}
                        {unit === 'rio_quente' ? 'Zona de Aperfei√ßoamento' : (year === '2024' ? 'Zona de Qualidade' : 'Zona Cr√≠tica')}
                        </div>
                    </>
                    )}
                </div>

                <div className="bg-white p-6 rounded-xl shadow-md col-span-1 md:col-span-2">
                    <div className="flex items-center gap-2 mb-4">
                    <Target className={unit === 'rio_quente' ? "text-teal-600" : "text-indigo-600"} size={20} />
                    <h2 className="text-lg font-bold text-gray-800">
                        {isCompare ? "An√°lise Comparativa (2024 vs 2025)" : `Destaques Estrat√©gicos - ${unit === 'rio_quente' ? 'Rio Quente' : `Flores ${year}`}`}
                    </h2>
                    </div>
                    
                    <div className="grid grid-cols-1 gap-4 text-sm text-gray-600">
                    {unit === 'rio_quente' ? (
                        <>
                        <div className="flex items-start gap-2 bg-teal-50 p-3 rounded-lg border border-teal-100">
                            <Trophy className="text-teal-600 mt-1 flex-shrink-0" size={16} />
                            <p>
                            <strong>Excel√™ncia Visual e Pedag√≥gica:</strong> O "Feedback para a Equipe" (PASSE) atingiu 98% de satisfa√ß√£o e a Atratividade do Material 96%, pontos fort√≠ssimos da unidade.
                            </p>
                        </div>
                        <div className="flex items-start gap-2 bg-amber-50 p-3 rounded-lg border border-amber-100">
                            <AlertTriangle className="text-amber-600 mt-1 flex-shrink-0" size={16} />
                            <p>
                            <strong>Usabilidade em Sala:</strong> A "Facilidade de uso em sala" (Material) √© o ponto de maior atrito (81%), exigindo revis√£o ergon√¥mica ou treinamento focado para professores.
                            </p>
                        </div>
                        </>
                    ) : isCompare ? (
                        <>
                        <div className="flex items-start gap-2 bg-red-50 p-3 rounded-lg border border-red-100">
                            <TrendingDown className="text-red-500 mt-1 flex-shrink-0" size={16} />
                            <p>
                            <strong>Colapso de Lealdade (NPS):</strong> A queda de 65 para 6 no NPS √© alarmante. Problemas operacionais e excesso de avalia√ß√µes impactaram severamente a percep√ß√£o de valor.
                            </p>
                        </div>
                        <div className="flex items-start gap-2 bg-blue-50 p-3 rounded-lg border border-blue-100">
                            <Users className="text-blue-500 mt-1 flex-shrink-0" size={16} />
                            <p>
                            <strong>Resili√™ncia T√©cnica:</strong> A Capacita√ß√£o mant√©m-se forte em "Dom√≠nio dos Instrutores" (93%), um pilar de sustenta√ß√£o em meio √† crise.
                            </p>
                        </div>
                        </>
                    ) : year === '2024' ? (
                        <>
                        <p>‚úÖ <strong>Ano de Ouro:</strong> NPS 65 (Qualidade). O PASSE e o Material Did√°tico tiveram quesitos atingindo 100% de satisfa√ß√£o.</p>
                        <p>‚ö†Ô∏è <strong>Sinal Amarelo:</strong> A "Facilidade de uso em sala" (54% Muito Bom) j√° demonstrava fragilidade operacional.</p>
                        </>
                    ) : (
                        <>
                        <p>üö® <strong>Crise Operacional:</strong> Queda relevante no Portal (80% em adequa√ß√£o). Coment√°rios indicam descompasso entre conte√∫do ensinado e cobrado.</p>
                        <p>üìâ <strong>Sobrecarga:</strong> Excesso de avalia√ß√µes citado como ponto cr√≠tico.</p>
                        </>
                    )}
                    </div>
                </div>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                {isCompare ? (
                    <>
                    <ComparisonChart title="Material Did√°tico" data24={dataFlores2024.material} data25={dataFlores2025.material} icon={BookOpen} />
                    <ComparisonChart title="Capacita√ß√£o" data24={dataFlores2024.capacitacao} data25={dataFlores2025.capacitacao} icon={Users} />
                    <ComparisonChart title="Portal SESI Educa√ß√£o" data24={dataFlores2024.portal} data25={dataFlores2025.portal} icon={Monitor} />
                    <ComparisonChart title="PASSE (Avalia√ß√£o)" data24={dataFlores2024.passe} data25={dataFlores2025.passe} icon={ClipboardCheck} />
                    </>
                ) : (
                    <>
                    <SingleYearChart title="Material Did√°tico" data={currentData.material} icon={BookOpen} />
                    <SingleYearChart title="Capacita√ß√£o" data={currentData.capacitacao} icon={Users} />
                    <SingleYearChart title="Portal SESI Educa√ß√£o" data={currentData.portal} icon={Monitor} />
                    <SingleYearChart title="PASSE (Avalia√ß√£o)" data={currentData.passe} icon={ClipboardCheck} />
                    </>
                )}
                </div>

                <div className="mt-8 bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-8">
                <div className="p-6 bg-gray-50 border-b border-gray-200 flex justify-between items-center">
                    <div className="flex items-center gap-2">
                    <MessageSquare className={unit === 'rio_quente' ? "text-teal-600" : "text-indigo-600"} size={20} />
                    <h2 className="text-lg font-bold text-gray-800">
                        {isCompare ? "Voz do Usu√°rio (Acumulado 24/25)" : `Coment√°rios e Sugest√µes (${unit === 'rio_quente' ? 'Consolidado' : year})`}
                    </h2>
                    </div>
                </div>
                
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-0 divide-y md:divide-y-0 md:divide-x divide-gray-100">
                    {(isCompare ? [...dataFlores2024.comentarios, ...dataFlores2025.comentarios] : currentData.comentarios).map((com, idx) => (
                    <div key={idx} className="p-6 hover:bg-gray-50 transition-colors">
                        <span className={`inline-block px-2 py-1 rounded text-xs font-bold uppercase tracking-wider mb-3
                        ${com.categoria === 'Positivo' || com.categoria === 'Elogio' ? 'bg-green-100 text-green-700' : 
                            com.categoria.includes('Infra') || com.categoria.includes('Clima') ? 'bg-orange-100 text-orange-700' : 
                            com.categoria.includes('Processos') || com.categoria.includes('Pedag√≥gico') ? 'bg-red-100 text-red-700' :
                            'bg-blue-100 text-blue-700'}`}>
                        {com.categoria}
                        </span>
                        <p className="text-sm text-gray-600 leading-relaxed italic">
                        "{com.texto}"
                        </p>
                    </div>
                    ))}
                </div>
                </div>

            </main>
            </div>
        );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
